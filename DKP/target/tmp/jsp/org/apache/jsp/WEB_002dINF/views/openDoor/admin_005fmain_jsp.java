package org.apache.jsp.WEB_002dINF.views.openDoor;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class admin_005fmain_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  static {
    _jspx_dependants = new java.util.ArrayList<String>(3);
    _jspx_dependants.add("/WEB-INF/views/include/taglib.jsp");
    _jspx_dependants.add("/WEB-INF/views/include/head.jsp");
    _jspx_dependants.add("/WEB-INF/views/openDoor/../include/navi_menu.jspf");
  }

  private org.apache.jasper.runtime.TagHandlerPool _jspx_tagPool_c_forEach_var_items;
  private org.apache.jasper.runtime.TagHandlerPool _jspx_tagPool_c_set_var_value_nobody;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspInit() {
    _jspx_tagPool_c_forEach_var_items = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
    _jspx_tagPool_c_set_var_value_nobody = org.apache.jasper.runtime.TagHandlerPool.getTagHandlerPool(getServletConfig());
  }

  public void _jspDestroy() {
    _jspx_tagPool_c_forEach_var_items.release();
    _jspx_tagPool_c_set_var_value_nobody.release();
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("\r\n");
      if (_jspx_meth_c_set_0(_jspx_page_context))
        return;
      out.write(' ');
      out.write('\r');
      out.write('\n');
      if (_jspx_meth_c_set_1(_jspx_page_context))
        return;
      out.write('\r');
      out.write('\n');
      out.write("\r\n");
      out.write("<html>\r\n");
      out.write("<head>\r\n");
      out.write("    <meta charset=\"UTF-8\">\r\n");
      out.write("    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge,chrome=1\"/>\r\n");
      out.write("    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, maximum-scale=1.0\">\r\n");
      out.write("    ");
      out.write("\n");
      out.write("<link rel=\"shortcut icon\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/favicon.ico\" type=\"image/vnd.microsoft.icon\">\n");
      out.write("<link rel=\"icon\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/favicon.ico\" type=\"image/vnd.microsoft.icon\">\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/jquery/jquery-1.12.1.min.js\" type=\"text/javascript\"></script>\n");
      out.write("<script src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/common/common.js\" type=\"text/javascript\"></script>\n");
      out.write("\n");
      out.write("\n");
      out.write("\r\n");
      out.write("    <link rel=\"stylesheet\" href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/semantic/semantic.min.css\"/>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/semantic/semantic.min.js\"></script>\r\n");
      out.write("    <script type=\"text/javascript\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/jquery/jquery.zoom.js\"></script>\r\n");
      out.write("    <script type=\"text/javascript\">\r\n");
      out.write("        $(document).ready(function () {\r\n");
      out.write("            $('.ui.modal').modal({allowMultiple: true, closable: false, autofocus: false});\r\n");
      out.write("            //dropdown初始化并且设定onChange事件\r\n");
      out.write("            $('#sel-game').dropdown('setting', 'onChange', function () {\r\n");
      out.write("                var gameId = $(\"#game\").val();\r\n");
      out.write("\r\n");
      out.write("                //union dropdown\r\n");
      out.write("                var unionSelector = '#sel-union';\r\n");
      out.write("                $(unionSelector + ' .menu .item').remove();\r\n");
      out.write("                var unionHtml = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                $(unionSelector + ' .menu').html(unionHtml);\r\n");
      out.write("                $(unionSelector).dropdown('set selected', '');\r\n");
      out.write("\r\n");
      out.write("                // team dropdown\r\n");
      out.write("                var teamSelector = '#sel-team';\r\n");
      out.write("                $(teamSelector + ' .menu .item').remove();\r\n");
      out.write("                var teamHtml = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                $(teamSelector + ' .menu').html(teamHtml);\r\n");
      out.write("                $(teamSelector).dropdown('set selected', '');\r\n");
      out.write("\r\n");
      out.write("                // activity dropdown\r\n");
      out.write("                var activitySelector = '#sel-activity';\r\n");
      out.write("                $(activitySelector + ' .menu .item').remove();\r\n");
      out.write("                var activityHtml = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                $(activitySelector + ' .menu').html(activityHtml);\r\n");
      out.write("                $(activitySelector).dropdown('set selected', '');\r\n");
      out.write("\r\n");
      out.write("                if (gameId == '') {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("\r\n");
      out.write("                $.get('/console/dkp/union', {\r\n");
      out.write("                    gameId: gameId\r\n");
      out.write("                }, function (data, state) {\r\n");
      out.write("                    if (data && data.length >= 0) {\r\n");
      out.write("                        var selector = '#sel-union';\r\n");
      out.write("                        $(selector + ' .menu .item').remove();\r\n");
      out.write("                        var html = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                        for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                            html += '<div class=\"item\" data-value=\"' + data[i].id + '\">' + data[i].unionName + '</div>'\r\n");
      out.write("                        }\r\n");
      out.write("                        $(selector + ' .menu').html(html);\r\n");
      out.write("                        $(selector).dropdown('set selected', '');\r\n");
      out.write("                    }\r\n");
      out.write("                })\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            $('#sel-union').dropdown('setting', 'onChange', function () {\r\n");
      out.write("                var gameId = $(\"#game\").val();\r\n");
      out.write("                var unionId = $(\"#union\").val();\r\n");
      out.write("                if (unionId == '') {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                $.get('/console/dkp/team/', {\r\n");
      out.write("                    gameId: gameId,\r\n");
      out.write("                    unionId: unionId\r\n");
      out.write("                }, function (data, state) {\r\n");
      out.write("                    if (data && data.length >= 0) {\r\n");
      out.write("                        var selector = '#sel-team';\r\n");
      out.write("                        var html = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                        for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                            html += '<div class=\"item\" data-value=\"' + data[i].id + '\">' + data[i].name + '</div>'\r\n");
      out.write("                        }\r\n");
      out.write("                        $(selector + ' .menu').html(html);\r\n");
      out.write("                        $(selector).dropdown('set selected', '')\r\n");
      out.write("                    }\r\n");
      out.write("                })\r\n");
      out.write("            })\r\n");
      out.write("\r\n");
      out.write("            //team dropdown\r\n");
      out.write("            $('#sel-team').dropdown('setting', 'onChange', function () {\r\n");
      out.write("                var teamId = $(\"#team\").val();\r\n");
      out.write("                var gameId = $('#game').val();\r\n");
      out.write("                var unionId = $(\"#union\").val();\r\n");
      out.write("                if (teamId == '') {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                $.get('/console/dkp/activity/', {\r\n");
      out.write("                    gameId: gameId,\r\n");
      out.write("                    teamId: teamId,\r\n");
      out.write("                    unionId: unionId\r\n");
      out.write("                }, function (data, state) {\r\n");
      out.write("                    if (data && data.length >= 0) {\r\n");
      out.write("                        var selector = '#sel-activity';\r\n");
      out.write("                        $(selector + ' .menu .item').remove();\r\n");
      out.write("                        var html = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                        for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                            html += '<div class=\"item\" data-value=\"' + data[i].id + '\">' + data[i].name + '</div>';\r\n");
      out.write("                        }\r\n");
      out.write("                        $(selector + ' .menu').html(html);\r\n");
      out.write("                        $(selector).dropdown('set selected', '');\r\n");
      out.write("                    }\r\n");
      out.write("                });\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            //没选游戏的时候报错\r\n");
      out.write("            $('.ui.form').form({\r\n");
      out.write("                fields: {\r\n");
      out.write("                    game: {\r\n");
      out.write("                        identifier: 'game',\r\n");
      out.write("                        rules: [\r\n");
      out.write("                            {\r\n");
      out.write("                                type: 'empty',\r\n");
      out.write("                                prompt: '请选择游戏',\r\n");
      out.write("                            }\r\n");
      out.write("                        ]\r\n");
      out.write("                    },\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            // 查询按钮\r\n");
      out.write("            $('#btn-query').click(function () {\r\n");
      out.write("                if ($('#game').val() == '') {\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                queryData(1);\r\n");
      out.write("            });\r\n");
      out.write("        });\r\n");
      out.write("        //上面的到document为止，页面刷新完毕后加载\r\n");
      out.write("\r\n");
      out.write("        //获取当前页信息\r\n");
      out.write("        function queryData(pageNo) {\r\n");
      out.write("            showLoading();\r\n");
      out.write("            $.get(\"/console/dkp/list\", {\r\n");
      out.write("                gameId: $(\"#game\").val(),\r\n");
      out.write("                teamId: $(\"#team\").val(),\r\n");
      out.write("                activityId: $(\"#activity\").val(),\r\n");
      out.write("                pageNo: pageNo,\r\n");
      out.write("                pageNum: 10\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                if (data && data.dkpInfoList) {\r\n");
      out.write("                    var dkpInfoList = data.dkpInfoList;\r\n");
      out.write("                    $('#tbl-data tbody tr').remove();\r\n");
      out.write("                    var trHtml = '';\r\n");
      out.write("                    for (var i = 0; i < dkpInfoList.length; i++) {\r\n");
      out.write("                        trHtml += '<tr>';\r\n");
      out.write("                        trHtml += '<td>' + dkpInfoList[i].gameName + '</td>';\r\n");
      out.write("                        trHtml += '<td>' + dkpInfoList[i].teamName + '</td>';\r\n");
      out.write("                        trHtml += '<td>' + dkpInfoList[i].userName + '</td>';\r\n");
      out.write("                        trHtml += '<td>' + dkpInfoList[i].activityName + '</td>';\r\n");
      out.write("                    }\r\n");
      out.write("                    $('#tbl-data tbody').html(trHtml);\r\n");
      out.write("                    $('#currentPage-popup').val(data.pageNo);\r\n");
      out.write("                    $('#no-data').hide();\r\n");
      out.write("                    $('#tbl-data').show();\r\n");
      out.write("                    showPaging(data.pageNo, data.sumPage);\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("            hideLoading();\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //分页信息\r\n");
      out.write("        function showPaging(currentPage, totalCount) {\r\n");
      out.write("            var pageCount = totalCount;\r\n");
      out.write("            var pagingHtml;\r\n");
      out.write("            if (currentPage == 1) {\r\n");
      out.write("                pagingHtml = '<a class=\"icon item disabled\"><i class=\"angle left icon\"></i>';\r\n");
      out.write("            } else {\r\n");
      out.write("                pagingHtml = '<a class=\"icon item\" onclick=\"pagingPrevious()\"><i class=\"angle left icon\"></i>';\r\n");
      out.write("            }\r\n");
      out.write("            for (var i = 1; i <= pageCount; i++) {\r\n");
      out.write("                if (currentPage == i) {\r\n");
      out.write("                    pagingHtml += '<a class=\"item active\">' + i + '</a>';\r\n");
      out.write("                } else {\r\n");
      out.write("                    pagingHtml += '<a class=\"item\" onclick=\"queryData(' + i + ')\">' + i + '</a>';\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("            if (currentPage == pageCount) {\r\n");
      out.write("                pagingHtml += '<a class=\"icon item disabled\"><i class=\"angle right icon\"></i>';\r\n");
      out.write("            } else {\r\n");
      out.write("                pagingHtml += '<a class=\"icon item\" onclick=\"pagingNext()\"><i class=\"angle right icon\"></i>';\r\n");
      out.write("            }\r\n");
      out.write("            $('#paging .item').remove();\r\n");
      out.write("            $('#paging').html(pagingHtml);\r\n");
      out.write("            $('.ui.first.modal').modal('refresh');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //页码前进按钮\r\n");
      out.write("        function pagingPrevious() {\r\n");
      out.write("            var pageNo = $('#currentPage').val();\r\n");
      out.write("            pageNo = parseInt(pageNo) - 1;\r\n");
      out.write("            queryData(pageNo);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //页码后退按钮\r\n");
      out.write("        function pagingNext() {\r\n");
      out.write("            var pageNo = $('#currentPage').val();\r\n");
      out.write("            pageNo = parseInt(pageNo) + 1;\r\n");
      out.write("            queryData(pageNo);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //批阅异常详细信息列表\r\n");
      out.write("        function detailSet(testId, pageNo) {\r\n");
      out.write("            $.get('/console/markException/detail/list', {\r\n");
      out.write("                testId: testId,\r\n");
      out.write("                pageNo: pageNo,\r\n");
      out.write("                pageSize: 7\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                if (data && data.markExceptionInfoList && data.markExceptionInfoList.length > 0) {\r\n");
      out.write("                    var dataList = data.markExceptionInfoList;\r\n");
      out.write("                    $('#tbl-data-detail tbody tr').remove();\r\n");
      out.write("                    var trHtml = '';\r\n");
      out.write("                    for (var i = 0; i < dataList.length; i++) {\r\n");
      out.write("                        var imgEmptyFlag = dataList[i].imgEmptyFlag;\r\n");
      out.write("                        fn =\r\n");
      out.write("                                \"updateDetailSet('\" + dataList[i].id + \"','\" + dataList[i].testId + \"','\" + dataList[i].number + \"',\" +\r\n");
      out.write("                                \"'\" + dataList[i].paperId + \"','\" + dataList[i].question + \"','\" + dataList[i].subjectId + \"',\" +\r\n");
      out.write("                                \"'\" + dataList[i].path + \"','\" + dataList[i].ansImgId + \"','\" + dataList[i].anscardId + \"','\" + dataList[i].version + \"','\" + dataList[i].sideFlag + \"','\" + dataList[i].updateTime + \"','\" + dataList[i].questionImgId + \"','\" + dataList[i].imgEmptyFlag + \"',\" +\r\n");
      out.write("                                \"'\" + dataList[i].subjectName + \"')\";\r\n");
      out.write("                        trHtml += '<tr>';\r\n");
      out.write("                        trHtml += '<td>' + dataList[i].testId + '</td>';\r\n");
      out.write("                        trHtml += '<td>' + dataList[i].ansImgId + '</td>';\r\n");
      out.write("                        trHtml += '<td>';\r\n");
      out.write("                        if (imgEmptyFlag == 1) {\r\n");
      out.write("                            trHtml += '<div class=\"ui button\" name=\"btn-query-update\" style=\"color: red;\" onclick=\"' + fn + '\">处理</div>';\r\n");
      out.write("                        } else {\r\n");
      out.write("                            trHtml += '<div class=\"ui button\" name=\"btn-query-update\" onclick=\"' + fn + '\">处理</div>';\r\n");
      out.write("                        }\r\n");
      out.write("                        trHtml += '</td>';\r\n");
      out.write("                    }\r\n");
      out.write("                    $('#tbl-data-detail tbody').html(trHtml);\r\n");
      out.write("                    $('#currentPage-popup').val(data.pageNo);\r\n");
      out.write("                    $('#no-data-detail').hide();\r\n");
      out.write("                    $('#tbl-data-detail').show();\r\n");
      out.write("                    showPaging(data.pageNo, data.pageSize, data.totalCount);\r\n");
      out.write("                } else {\r\n");
      out.write("                    if (pageNo == 1) {\r\n");
      out.write("                        $('#tbl-data-detail').hide();\r\n");
      out.write("                        $('#no-data-detail').show();\r\n");
      out.write("                    } else {\r\n");
      out.write("                        detailQueryData(pageNo - 1);\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("                $('.ui.first.modal').modal('refresh');\r\n");
      out.write("            });\r\n");
      out.write("            var page = $('#currentPage').val();\r\n");
      out.write("            $('.ui.first.modal').modal('show');\r\n");
      out.write("\r\n");
      out.write("            //内置窗体分页\r\n");
      out.write("            var showPaging = function (currentPage, pageSize, totalCount) {\r\n");
      out.write("                var pageCount = totalCount;\r\n");
      out.write("                var pagingHtml;\r\n");
      out.write("                if (currentPage == 1) {\r\n");
      out.write("                    pagingHtml = '<a class=\"icon item disabled\"><i class=\"angle left icon\"></i>';\r\n");
      out.write("                } else {\r\n");
      out.write("                    pagingHtml = '<a class=\"icon item\" name=\"detailPagingPrevious\"><i class=\"angle left icon\"></i>';\r\n");
      out.write("                }\r\n");
      out.write("                for (var i = 1; i <= pageCount; i++) {\r\n");
      out.write("                    if (currentPage == i) {\r\n");
      out.write("                        pagingHtml += '<a class=\"item active\">' + i + '</a>';\r\n");
      out.write("                    } else {\r\n");
      out.write("                        pagingHtml += '<a class=\"item\" name=\"detailQueryData\" data-page-no=\"' + i + '\">' + i + '</a>';\r\n");
      out.write("                    }\r\n");
      out.write("                }\r\n");
      out.write("                if (currentPage == pageCount) {\r\n");
      out.write("                    pagingHtml += '<a class=\"icon item disabled\"><i class=\"angle right icon\"></i>';\r\n");
      out.write("                } else {\r\n");
      out.write("                    pagingHtml += '<a class=\"icon item\" name=\"detailPagingNext\"><i class=\"angle right icon\"></i>';\r\n");
      out.write("                }\r\n");
      out.write("                $('#detailPaging .item').remove();\r\n");
      out.write("                $('#detailPaging').html(pagingHtml);\r\n");
      out.write("\r\n");
      out.write("                //内置框题前一页\r\n");
      out.write("                $('[name=\"detailPagingPrevious\"]').click(function () {\r\n");
      out.write("                    var pageNo = $('#currentPage-popup').val();\r\n");
      out.write("                    pageNo = parseInt(pageNo) - 1;\r\n");
      out.write("                    detailQueryData(pageNo);\r\n");
      out.write("                })\r\n");
      out.write("\r\n");
      out.write("                //内置窗体后一页\r\n");
      out.write("                $('[name=\"detailPagingNext\"]').click(function () {\r\n");
      out.write("                    var pageNo = $('#currentPage-popup').val();\r\n");
      out.write("                    pageNo = parseInt(pageNo) + 1;\r\n");
      out.write("                    detailQueryData(pageNo);\r\n");
      out.write("                })\r\n");
      out.write("\r\n");
      out.write("                //内置窗体数字页\r\n");
      out.write("                $('[name=\"detailQueryData\"]').click(function (e) {\r\n");
      out.write("                    var self = $(e.target);\r\n");
      out.write("                    var pageNo = self.data(\"page-no\")\r\n");
      out.write("                    detailQueryData(pageNo);\r\n");
      out.write("                })\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            //根据pageNo获取批阅异常列表详细信息\r\n");
      out.write("            var detailQueryData = function (pageNo) {\r\n");
      out.write("                $.get('/console/markException/detail/list', {\r\n");
      out.write("                    testId: testId,\r\n");
      out.write("                    pageNo: pageNo,\r\n");
      out.write("                    pageSize: 7\r\n");
      out.write("                }, function (data, state) {\r\n");
      out.write("                    if (data && data.markExceptionInfoList && data.markExceptionInfoList.length > 0) {\r\n");
      out.write("                        var dataList = data.markExceptionInfoList;\r\n");
      out.write("                        $('#tbl-data-detail tbody tr').remove();\r\n");
      out.write("                        var trHtml = '';\r\n");
      out.write("                        for (var i = 0; i < dataList.length; i++) {\r\n");
      out.write("                            var imgEmptyFlag = dataList[i].imgEmptyFlag;\r\n");
      out.write("                            fn =\r\n");
      out.write("                                    \"updateDetailSet('\" + dataList[i].id + \"','\" + dataList[i].testId + \"','\" + dataList[i].number + \"',\" +\r\n");
      out.write("                                    \"'\" + dataList[i].paperId + \"','\" + dataList[i].question + \"','\" + dataList[i].subjectId + \"',\" +\r\n");
      out.write("                                    \"'\" + dataList[i].path + \"','\" + dataList[i].ansImgId + \"','\" + dataList[i].anscardId + \"','\" + dataList[i].version + \"',\" +\r\n");
      out.write("                                    \"'\" + dataList[i].sideFlag + \"','\" + dataList[i].updateTime + \"','\" + dataList[i].questionImgId + \"','\" + dataList[i].imgEmptyFlag + \"','\" + dataList[i].subjectName + \"')\";\r\n");
      out.write("                            trHtml += '<tr>';\r\n");
      out.write("                            trHtml += '<td>' + dataList[i].testId + '</td>';\r\n");
      out.write("                            trHtml += '<td>' + dataList[i].ansImgId + '</td>';\r\n");
      out.write("                            trHtml += '<td>';\r\n");
      out.write("                            if (imgEmptyFlag == 1) {\r\n");
      out.write("                                trHtml += '<div class=\"ui button\" name=\"btn-query-update\" style=\"color: red;\" onclick=\"' + fn + '\">处理</div>';\r\n");
      out.write("                            } else {\r\n");
      out.write("                                trHtml += '<div class=\"ui button\" name=\"btn-query-update\" onclick=\"' + fn + '\">处理</div>';\r\n");
      out.write("                            }\r\n");
      out.write("                            trHtml += '</td>';\r\n");
      out.write("                        }\r\n");
      out.write("                        $('#tbl-data-detail tbody').html(trHtml);\r\n");
      out.write("                        $('#currentPage-popup').val(data.pageNo);\r\n");
      out.write("                        $('#no-data-detail').hide();\r\n");
      out.write("                        $('#tbl-data-detail').show();\r\n");
      out.write("                        showPaging(data.pageNo, data.pageSize, data.totalCount);\r\n");
      out.write("                    } else {\r\n");
      out.write("                        $('#tbl-data-detail').hide();\r\n");
      out.write("                        $('#no-data-detail').show();\r\n");
      out.write("                    }\r\n");
      out.write("                    $('.ui.first.modal').modal('refresh');\r\n");
      out.write("                });\r\n");
      out.write("                var page = $('#currentPage').val();\r\n");
      out.write("                $('.ui.first.modal').modal('show');\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //显示批阅异常试题信息\r\n");
      out.write("        function updateDetailSet(id, testId, number, paperId, question, subjectId, path, ansImgId, originalAnsCard, type, pageNum, updateTime, questionImgId, imgEmptyFlag, subjectName) {\r\n");
      out.write("            var exception = '#sel-exception-popup';\r\n");
      out.write("            var html =\r\n");
      out.write("                    '<input id=\"id-popup\" name=\"id-popup\"  value=\"' + id + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"testId-popup\" name=\"testId-popup\"  value=\"' + testId + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"number-popup\" name=\"number-popup\"  value=\"' + number + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"paperId-popup\" name=\"paperId-popup\"  value=\"' + paperId + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"question-popup\" name=\"question-popup\"  value=\"' + question + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"subject-popup\" name=\"subject-popup\"  value=\"' + subjectId + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"originalAnsCard-popup\" name=\"originalAnsCard-popup\"  value=\"' + originalAnsCard + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"type-popup\" name=\"type-popup\"  value=\"' + type + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"pageNum-popup\" name=\"pageNum-popup\"  value=\"' + pageNum + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"updateTime-popup\" name=\"updateTime-popup\"  value=\"' + updateTime + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"path-popup\" name=\"path-popup\"  value=\"' + path + '\" type=\"hidden\"/>' +\r\n");
      out.write("                    '<input id=\"ansImgId-popup\" name=\"ansImgId-popup\" type=\"hidden\" value=\"' + ansImgId + '\"/>' +\r\n");
      out.write("                    '<input id=\"questionImgId-popup\" name=\"questionImgId-popup\" type=\"hidden\" value=\"' + questionImgId + '\"/>' +\r\n");
      out.write("                    '<input id=\"imgEmptyFlag-popup\" name=\"imgEmptyFlag-popup\" type=\"hidden\" value=\"' + imgEmptyFlag + '\"/>' +\r\n");
      out.write("                    '<input id=\"subjectName-popup\" name=\"subjectName-popup\" type=\"hidden\" value=\"' + subjectName + '\"/>';\r\n");
      out.write("            $(exception).html(html);\r\n");
      out.write("            var ansImgId = ansImgId.replace(\".jpg\", \"\");\r\n");
      out.write("            var path = path.replace('backup/', '');\r\n");
      out.write("            var pointSelector = '#sel-picture-popup';\r\n");
      out.write("            $(pointSelector + ' img').remove();\r\n");
      out.write("            var questionImgIdArray = questionImgId.split(\",\");\r\n");
      out.write("            var pictureHtml = '';\r\n");
      out.write("            for (var i = 0; i < questionImgIdArray.length; i++) {\r\n");
      out.write("                pictureHtml += '<img alt= \"图片\" style=\"width:750px;height=400px;\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("' + '/answer' + path + 'rotated' + '/' + paperId + '/' + number + '/' + ansImgId + '/' + questionImgIdArray[i] + '.jpg' + '\"/>';\r\n");
      out.write("            }\r\n");
      out.write("            $(pointSelector).html(pictureHtml);\r\n");
      out.write("\r\n");
      out.write("            $.get('/console/markException/showLabel', {\r\n");
      out.write("                paperId: paperId,\r\n");
      out.write("                question: question\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                var sHtml = '<p>' + ' 科目 :' + (subjectName) + '</p>';\r\n");
      out.write("                var qHtml = '<p>' + ' 试题号 :' + (data) + '</p>';\r\n");
      out.write("                $('#sel-subject-popup').html(sHtml);\r\n");
      out.write("                $('#sel-question-popup').html(qHtml);\r\n");
      out.write("            })\r\n");
      out.write("\r\n");
      out.write("            $('#sel-fireWork-popup').hide();\r\n");
      out.write("            $('#sel-chooseDo-popup').hide();\r\n");
      out.write("            $('#sel-prompt-popup').hide();\r\n");
      out.write("\r\n");
      out.write("            $('#sel-message2-popup').hide();\r\n");
      out.write("\r\n");
      out.write("            $(\"input[type='radio']\").removeAttr('checked');\r\n");
      out.write("\r\n");
      out.write("            var updateHtml = '<button class=\"fluid ui button\"  onclick=\"updateException()\">确认修改</button>';\r\n");
      out.write("            $('#update-button').html(updateHtml);\r\n");
      out.write("            $('#sel-button-popup').show();\r\n");
      out.write("\r\n");
      out.write("            if (imgEmptyFlag == 1) {\r\n");
      out.write("                //给radio添加选中状态\r\n");
      out.write("                $(\"input[name='errorType']\").get(2).checked = true;\r\n");
      out.write("                seeDetailMarkException();\r\n");
      out.write("            }\r\n");
      out.write("            var pageNo = $('#currentPage-popup').val();\r\n");
      out.write("            $('.ui.second.modal').modal({\r\n");
      out.write("                autofocus: false,\r\n");
      out.write("                closable: false,\r\n");
      out.write("                onHidden: function () {\r\n");
      out.write("                    detailSet(testId, pageNo);\r\n");
      out.write("                }\r\n");
      out.write("            }).modal('show');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //重新切图异常显示界面\r\n");
      out.write("        function showMarkException() {\r\n");
      out.write("            $('#sel-message-popup').hide();\r\n");
      out.write("            $('#sel-message2-popup').hide();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var type = $('#type-popup').val();\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var question = $('#question-popup').val();\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var type = $('#type-popup').val();\r\n");
      out.write("            var pageNum = $('#pageNum-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            var ansImgId = $('#ansImgId-popup').val();\r\n");
      out.write("            var path = $('#path-popup').val();\r\n");
      out.write("\r\n");
      out.write("            var picturePopup = '#sel-picture-popup';\r\n");
      out.write("            $('#sel-point-popup').hide();\r\n");
      out.write("            $(picturePopup).show();\r\n");
      out.write("            var htmlPicture = '<img alt= \"图片\" style=\"width:750px;height:850px;\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/' + 'answer' + path + ansImgId + '\"/>';\r\n");
      out.write("            $(picturePopup).html(htmlPicture);\r\n");
      out.write("            $(picturePopup).zoom({on: 'toggle'});\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            if (pageNum == 1) {\r\n");
      out.write("                $(\"#sel-right\").hide();\r\n");
      out.write("            } else {\r\n");
      out.write("                $(\"#sel-right\").show();\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            var buttonHtml = '<button class=\"fluid ui button\"  onclick=\"updateFireWorkException()\">确认修改 </button>';\r\n");
      out.write("            $('#update-button').html(buttonHtml);\r\n");
      out.write("\r\n");
      out.write("            $('#sel-fireWork-popup').show();\r\n");
      out.write("            $('#sel-chooseDo-popup').hide();\r\n");
      out.write("            $('#sel-prompt-popup').hide();\r\n");
      out.write("            $('#sel-button-popup').show();\r\n");
      out.write("\r\n");
      out.write("            var defaultPaper;\r\n");
      out.write("            var getDefaultPaper = function () {\r\n");
      out.write("                return $.get('/console/markException/defaultPaper', {\r\n");
      out.write("                    testId: testId\r\n");
      out.write("                })\r\n");
      out.write("                        .then(function (data) {\r\n");
      out.write("                            defaultPaper = data;\r\n");
      out.write("                            return $.Deferred().resolve().promise(); //这个是什么意思\r\n");
      out.write("                        });\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            //获得试卷组\r\n");
      out.write("            var getPopupGroup = function () {\r\n");
      out.write("                var selector = '#sel-group-popup';\r\n");
      out.write("                $(selector + ' .menu .item').remove();\r\n");
      out.write("                return $.get('/console/markException/paperGroup')\r\n");
      out.write("                        .then(function (data) {\r\n");
      out.write("                            var html = '';\r\n");
      out.write("                            for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                                html += '<div class=\"item\" data-value=\"' + data[i].id + '\">' + data[i].name + '</div>';\r\n");
      out.write("                            }\r\n");
      out.write("                            $(selector + ' .menu').html(html);\r\n");
      out.write("                            return $.Deferred().resolve().promise();\r\n");
      out.write("                        }).then(function () {\r\n");
      out.write("                            var $this = $(selector);\r\n");
      out.write("                            $this.dropdown('refresh');\r\n");
      out.write("                            $this.dropdown('set selected', defaultPaper.groupId);\r\n");
      out.write("                            var d = $.Deferred();\r\n");
      out.write("                            d.resolve();\r\n");
      out.write("                            return d.promise();\r\n");
      out.write("                        });\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            //获得试卷\r\n");
      out.write("            var getPopupPaper = function () {\r\n");
      out.write("                var d = $.Deferred().resolve();\r\n");
      out.write("                var selector = '#sel-paper-popup';\r\n");
      out.write("                $(selector + ' .menu .item').remove();\r\n");
      out.write("                return $.get('/console/markException/paper', {\r\n");
      out.write("                    testId: testId\r\n");
      out.write("                })\r\n");
      out.write("                        .then(function (data) {\r\n");
      out.write("                            var html = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                            for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                                html += '<div class=\"item\" data-value=\"' + data[i].paperId + '\">' + data[i].paperName + '<input id=\"test-popup\" name=\"test-popup\" type=\"hidden\" value=\"' + data[i].testId + '\"/>' + '</div>';\r\n");
      out.write("                            }\r\n");
      out.write("                            $(selector + ' .menu').html(html);\r\n");
      out.write("                            $(selector).dropdown('refresh');\r\n");
      out.write("                            $(selector).dropdown('set selected', '');\r\n");
      out.write("                            return d.promise();\r\n");
      out.write("                        }).then(function () {\r\n");
      out.write("                            var $this = $(selector);\r\n");
      out.write("                            $this.dropdown('refresh');\r\n");
      out.write("                            $('#sel-answerNoLeft-popup').dropdown('refresh');\r\n");
      out.write("                            $('#sel-answerNoLeft-popup').dropdown('set selected', '');\r\n");
      out.write("                            $('#sel-answerNoRight-popup').dropdown('refresh');\r\n");
      out.write("                            $('#sel-answerNoRight-popup').dropdown('set selected', '');\r\n");
      out.write("                            $this.dropdown('setting', 'onChange', paperPopupChange);\r\n");
      out.write("                            return d.promise();\r\n");
      out.write("                        }).always(function () {\r\n");
      out.write("                        });\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            //试卷下拉框事件改变\r\n");
      out.write("            var paperPopupChange = function () {\r\n");
      out.write("                var paperId = $('#paper-popup').val();\r\n");
      out.write("                var d = $.Deferred();\r\n");
      out.write("                d.resolve();\r\n");
      out.write("                if (paperId == '') {\r\n");
      out.write("                    $('#sel-answerNoLeft-popup .menu .item').remove();\r\n");
      out.write("                    $('#sel-answerNoLeft-popup .menu').html('<div class=\"item\" data-value=\"\">全部</div>');\r\n");
      out.write("                    $('#sel-answerNoLeft-popup').dropdown('refresh');\r\n");
      out.write("                    $('#sel-answerNoLeft-popup').dropdown('set selected', '');\r\n");
      out.write("\r\n");
      out.write("                    $('#sel-answerNoRight-popup .menu .item').remove();\r\n");
      out.write("                    $('#sel-answerNoRight-popup .menu').html('<div class=\"item\" data-value=\"\">全部</div>');\r\n");
      out.write("                    $('#sel-answerNoRight-popup').dropdown('refresh');\r\n");
      out.write("                    $('#sel-answerNoRight-popup').dropdown('set selected', '');\r\n");
      out.write("                } else {\r\n");
      out.write("                    return getPopupAnswerNo(paperId);\r\n");
      out.write("                }\r\n");
      out.write("            };\r\n");
      out.write("\r\n");
      out.write("            //获得答题卡\r\n");
      out.write("            var getPopupAnswerNo = function (paperId) {\r\n");
      out.write("\r\n");
      out.write("                var type = $('#type-popup').val();\r\n");
      out.write("\r\n");
      out.write("                var d = $.Deferred().resolve();\r\n");
      out.write("\r\n");
      out.write("                var LeftSelector = '#sel-answerNoLeft-popup';\r\n");
      out.write("                var RightSelector = '#sel-answerNoRight-popup';\r\n");
      out.write("                $(LeftSelector + ' .menu .item').remove();\r\n");
      out.write("                $(RightSelector + ' .menu .item').remove();\r\n");
      out.write("                return $.get('/console/markException/ansCardInfo', {\r\n");
      out.write("                    paperId: paperId,\r\n");
      out.write("                    type: type\r\n");
      out.write("                })\r\n");
      out.write("                        .then(function (data) {\r\n");
      out.write("                            var html = '<div class=\"item\" data-value=\"\">全部</div>';\r\n");
      out.write("                            for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                                var answer = data[i].anscardId;\r\n");
      out.write("                                var num = answer.substring(answer.length - 1, answer.length);\r\n");
      out.write("                                html += '<div class=\"item\" data-value=\"' + data[i].anscardId + '\">第   ' + num + '   页</div>';\r\n");
      out.write("                            }\r\n");
      out.write("                            $(LeftSelector + ' .menu').html(html);\r\n");
      out.write("                            $(RightSelector + ' .menu').html(html);\r\n");
      out.write("                            return d.promise();\r\n");
      out.write("                        }).then(function () {\r\n");
      out.write("                            $('#sel-answerNoLeft-popup').dropdown('refresh');\r\n");
      out.write("                            $('#sel-answerNoLeft-popup').dropdown('set selected', '');\r\n");
      out.write("\r\n");
      out.write("                            $('#sel-answerNoRight-popup').dropdown('refresh');\r\n");
      out.write("                            $('#sel-answerNoRight-popup').dropdown('set selected', '');\r\n");
      out.write("                            $(LeftSelector).dropdown('setting', 'onChange', leftAnswerNoPopupChange);\r\n");
      out.write("                            $(RightSelector).dropdown('setting', 'onChange', rightAnswerNoPopupChange);\r\n");
      out.write("                            return d.promise();\r\n");
      out.write("                        });\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            var rightAnswerNoPopupChange = function () {\r\n");
      out.write("                var right = $('#answerNoRight-popup').val();\r\n");
      out.write("                var rightLast = right.substring(right.length - 1, right.length);\r\n");
      out.write("                var left = right.substring(0, right.length - 1);\r\n");
      out.write("                if (rightLast % 2 == 0) {\r\n");
      out.write("                    rightLast = rightLast - 1;\r\n");
      out.write("                } else {\r\n");
      out.write("                    rightLast = parseInt(rightLast) + 1;\r\n");
      out.write("                }\r\n");
      out.write("                $('#sel-answerNoLeft-popup').dropdown('refresh');\r\n");
      out.write("                $('#sel-answerNoLeft-popup').dropdown('set selected', left + rightLast);\r\n");
      out.write("            }\r\n");
      out.write("            var leftAnswerNoPopupChange = function () {\r\n");
      out.write("                var left = $('#answerNoLeft-popup').val();\r\n");
      out.write("                var leftLast = left.substring(left.length - 1, left.length);\r\n");
      out.write("                var right = left.substring(0, left.length - 1);\r\n");
      out.write("                if (leftLast % 2 == 0) {\r\n");
      out.write("                    leftLast = leftLast - 1;\r\n");
      out.write("                } else {\r\n");
      out.write("                    leftLast = parseInt(leftLast) + 1;\r\n");
      out.write("                }\r\n");
      out.write("                $('#sel-answerNoRight-popup').dropdown('refresh');\r\n");
      out.write("                $('#sel-answerNoRight-popup').dropdown('set selected', right + leftLast);\r\n");
      out.write("\r\n");
      out.write("            };\r\n");
      out.write("\r\n");
      out.write("            //获取默认试卷信息\r\n");
      out.write("            getDefaultPaper()\r\n");
      out.write("                    .then(getPopupGroup)\r\n");
      out.write("                    .then(function () {\r\n");
      out.write("                        return getPopupPaper();\r\n");
      out.write("                    }).then(function () {\r\n");
      out.write("                defaultPaper = null;\r\n");
      out.write("            });\r\n");
      out.write("\r\n");
      out.write("            if (!(path.indexOf(\"empty\") > -1)) {\r\n");
      out.write("                showErrorOnPopup2(\"无需重新选择答题卡信息，请重新选择异常解决方案\");\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //选做题异常显示界面\r\n");
      out.write("        function showChooseDo() {\r\n");
      out.write("            $('#sel-message-popup').hide();\r\n");
      out.write("            $('#sel-message2-popup').hide();\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            var path = $('#path-popup').val();\r\n");
      out.write("            var originalAnsCardId = $('#originalAnsCard-popup').val();\r\n");
      out.write("            var ansImgId = $('#ansImgId-popup').val().replace(\".jpg\", \"\");\r\n");
      out.write("            var questionImgId = $('#questionImgId-popup').val();\r\n");
      out.write("            var question = $('#question-popup').val();\r\n");
      out.write("            var path = path.replace('backup/', '');\r\n");
      out.write("            var subjectName = $('#subjectName-popup').val();\r\n");
      out.write("\r\n");
      out.write("            var buttonHtml = '<button class=\"fluid ui button\"  onclick=\"updateChooseDoException()\">确认修改 </button>';\r\n");
      out.write("            $('#update-button').html(buttonHtml);\r\n");
      out.write("\r\n");
      out.write("            $('#sel-prompt-popup').hide();\r\n");
      out.write("            $('#sel-fireWork-popup').hide();\r\n");
      out.write("            $('#sel-chooseDo-popup').show();\r\n");
      out.write("\r\n");
      out.write("            $('#sel-button-popup').show();\r\n");
      out.write("            var d = $.Deferred().resolve();\r\n");
      out.write("            $.get('/console/markException/selectChooseDo', {\r\n");
      out.write("                answerNo: originalAnsCardId,\r\n");
      out.write("                question: question\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                var pointSelector = '#sel-picture-popup';\r\n");
      out.write("                $(pointSelector + ' img').remove();\r\n");
      out.write("                var questionImgIdArray = questionImgId.split(\",\");\r\n");
      out.write("                var pictureHtml = '';\r\n");
      out.write("                for (var i = 0; i < questionImgIdArray.length; i++) {\r\n");
      out.write("                    pictureHtml += '<img alt= \"图片\" style=\"width:750px;height=400px;\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("' + '/answer' + path + 'rotated' + '/' + paperId + '/' + number + '/' + ansImgId + '/' + questionImgIdArray[i] + '.jpg' + '\"/>';\r\n");
      out.write("                }\r\n");
      out.write("                $(pointSelector).html(pictureHtml);\r\n");
      out.write("                if (data.length == 0) {\r\n");
      out.write("\r\n");
      out.write("                    showErrorOnPopup2(\"非选做题选择错误！请重新选择异常解决方案\");\r\n");
      out.write("                    $('#chooseDo-label').hide();\r\n");
      out.write("                } else {\r\n");
      out.write("                    $('#sel-message2-popup').hide();\r\n");
      out.write("                    $('#chooseDo-label').show();\r\n");
      out.write("                    var selector = '#choose-do';\r\n");
      out.write("                    var html = '';\r\n");
      out.write("                    for (var i = 0; i < data.length; i++) {\r\n");
      out.write("                        html += '<div class=\"ui radio checkbox\" style=\"margin-right: 30px;\">' + '<input type=\"radio\" value=\"' + data[i] + '\" name=\"attribute\">' +\r\n");
      out.write("                                '<label>' + data[i] + '</label>' + '</input>' + '</div>';\r\n");
      out.write("                    }\r\n");
      out.write("                    $(selector).html(html);\r\n");
      out.write("                    return d.promise();\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //无法看到学生答案显示界面\r\n");
      out.write("        function seeDetailMarkException() {\r\n");
      out.write("            $('#sel-message-popup').hide();\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var path = $('#path-popup').val();\r\n");
      out.write("            var questionImgId = $('#questionImgId-popup').val();\r\n");
      out.write("            var ansImgId = $('#ansImgId-popup').val();\r\n");
      out.write("            var imgEmptyFlag = $('#imgEmptyFlag-popup').val();\r\n");
      out.write("\r\n");
      out.write("            var html = '<p>' + ' 考试号 :   ' + (testId) + '</p>' + '</br>';\r\n");
      out.write("            html += '<p>' + ' 学生号 :   ' + (number) + '</p>' + '</br>';\r\n");
      out.write("            html += '<p>' + ' 试卷号 :  ' + (paperId) + '</p>' + '</br>';\r\n");
      out.write("            html += '<p>' + ' 试题图片 :   ' + (questionImgId) + '.jpg' + '</p>' + '</br>';\r\n");
      out.write("            html += '<p>' + ' 原始切图 :   ' + (ansImgId) + '' + '</p>' + '</br>';\r\n");
      out.write("            html += '<p>' + ' 图片路径 :   ' + (path) + '</p>' + '</br>';\r\n");
      out.write("            html += '<p style=\"color: red\">' + '<i class=\"star icon\"></i>' + ' 其他异常错误! 请点击保存!由管理员处理!  ' + '</p>' + '</br>';\r\n");
      out.write("\r\n");
      out.write("            $('#prompt-message').html(html);\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("            var ansImgId = ansImgId.replace(\".jpg\", \"\");\r\n");
      out.write("            var path = path.replace('backup/', '');\r\n");
      out.write("            var pointSelector = '#sel-picture-popup';\r\n");
      out.write("            $(pointSelector + ' img').remove();\r\n");
      out.write("            var questionImgIdArray = questionImgId.split(\",\");\r\n");
      out.write("            var pictureHtml = '';\r\n");
      out.write("            for (var i = 0; i < questionImgIdArray.length; i++) {\r\n");
      out.write("                pictureHtml += '<img alt= \"图片\" style=\"width:750px;height=400px;\" src=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("' + '/answer' + path + 'rotated' + '/' + paperId + '/' + number + '/' + ansImgId + '/' + questionImgIdArray[i] + '.jpg' + '\"/>';\r\n");
      out.write("            }\r\n");
      out.write("            $(pointSelector).html(pictureHtml);\r\n");
      out.write("            $('#sel-message2-popup').hide();\r\n");
      out.write("            $('#sel-prompt-popup').show();\r\n");
      out.write("            $('#sel-fireWork-popup').hide();\r\n");
      out.write("            $('#sel-chooseDo-popup').hide();\r\n");
      out.write("            $('#sel-button-popup').hide();\r\n");
      out.write("            if (imgEmptyFlag == 1) {\r\n");
      out.write("                $('#revoke-button2').show();\r\n");
      out.write("                $('#delete-button2').show();\r\n");
      out.write("                $('#submit-button').hide();\r\n");
      out.write("            } else {\r\n");
      out.write("                $('#revoke-button2').hide();\r\n");
      out.write("                $('#delete-button2').hide();\r\n");
      out.write("                $('#submit-button').show();\r\n");
      out.write("            }\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //保存 答案颠倒异常 修改后试题信息\r\n");
      out.write("        function updateChooseDoException() {\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var question = $('#question-popup').val();\r\n");
      out.write("            var subjectId = $('#subject-popup').val();\r\n");
      out.write("            var attribute = $('#choose-do input[name=\"attribute\"]:checked').val();\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var errorId = $('#error-type input[name=\"errorType\"]:checked').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            var originalAnsCardId = $('#originalAnsCard-popup').val();\r\n");
      out.write("\r\n");
      out.write("            if (attribute == undefined) {\r\n");
      out.write("                showErrorOnPopup(\"请选择试题,或重新选择异常处理方案\");\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            $.post('/console/markException/updateChooseDoException', {\r\n");
      out.write("                number: number,\r\n");
      out.write("                paperId: paperId,\r\n");
      out.write("                testId: testId,\r\n");
      out.write("                question: question,\r\n");
      out.write("                subjectId: subjectId,\r\n");
      out.write("                attribute: attribute,\r\n");
      out.write("                id: id,\r\n");
      out.write("                errorId: errorId,\r\n");
      out.write("                updateTime: updateTime,\r\n");
      out.write("                originalAnsCardId: originalAnsCardId\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                if (data == 2) {\r\n");
      out.write("                    showErrorOnPopup(\"非选做题选择错误！请重新选择异常解决方案\")\r\n");
      out.write("                } else if (data == 3) {\r\n");
      out.write("                    $('.ui.second.modal').modal('hide');\r\n");
      out.write("                    var pageNo = $('#currentPage').val();\r\n");
      out.write("                    queryData(pageNo);\r\n");
      out.write("                } else {\r\n");
      out.write("                    $('.ui.second.modal').modal('hide');\r\n");
      out.write("                }\r\n");
      out.write("            });\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //保存批阅异常中答案与科目不符错误\r\n");
      out.write("        function updateFireWorkException() {\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var paperId = $('#paper-popup').val();\r\n");
      out.write("            var pageSize = $('#pageNum-popup').val();\r\n");
      out.write("            if (pageSize == 2) {\r\n");
      out.write("                var leftAnswerNo = $('#answerNoLeft-popup').val();\r\n");
      out.write("                var rightAnswerNo = $('#answerNoRight-popup').val();\r\n");
      out.write("                var answerNo = leftAnswerNo + \";\" + rightAnswerNo;\r\n");
      out.write("            } else {\r\n");
      out.write("                var leftAnswerNo = $('#answerNoLeft-popup').val();\r\n");
      out.write("                var answerNo = $('#answerNoLeft-popup').val();\r\n");
      out.write("            }\r\n");
      out.write("            var originalAnsCardId = $('#originalAnsCard-popup').val();\r\n");
      out.write("            var ansImgId = $('#ansImgId-popup').val();\r\n");
      out.write("            var errorId = $('#error-type input[name=\"errorType\"]:checked').val();\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var test = $('#test-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            var path = $('#path-popup').val();\r\n");
      out.write("\r\n");
      out.write("            if (paperId.length == 0) {\r\n");
      out.write("                showErrorOnPopup(\"请选择试卷,或重新选择异常处理方案\");\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("            if ((pageSize == 1) && (leftAnswerNo.length == 0)) {\r\n");
      out.write("                showErrorOnPopup(\"请选择答题卡\");\r\n");
      out.write("                return;\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            if (pageSize == 2) {\r\n");
      out.write("                if (leftAnswerNo.length == 0 && rightAnswerNo.length != 0) {\r\n");
      out.write("                    showErrorOnPopup('请选择左答题卡');\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                else if (leftAnswerNo.length != 0 && rightAnswerNo.length == 0) {\r\n");
      out.write("                    showErrorOnPopup('请选择右答题卡');\r\n");
      out.write("                    return;\r\n");
      out.write("                } else if (leftAnswerNo.length == 0 && rightAnswerNo.length == 0) {\r\n");
      out.write("                    showErrorOnPopup('请选择答题卡');\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            if (pageSize == 2) {\r\n");
      out.write("                var left = (leftAnswerNo.substring(leftAnswerNo.length - 1, leftAnswerNo.length)) / 2\r\n");
      out.write("                var right = (rightAnswerNo.substring(rightAnswerNo.length - 1, rightAnswerNo.length)) / 2\r\n");
      out.write("                var LeftLast = Math.ceil(left);\r\n");
      out.write("                var RightLast = Math.ceil(right);\r\n");
      out.write("                if (left == right) {\r\n");
      out.write("                    showErrorOnPopup('请选择不同答题卡');\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("                if (LeftLast != RightLast) {\r\n");
      out.write("                    showErrorOnPopup('请选择相邻答题卡');\r\n");
      out.write("                    return;\r\n");
      out.write("                }\r\n");
      out.write("            }\r\n");
      out.write("\r\n");
      out.write("            $.post('/console/markException/updateFireWorkException', {\r\n");
      out.write("                testId: testId,\r\n");
      out.write("                id: id,\r\n");
      out.write("                number: number,\r\n");
      out.write("                paperId: paperId,\r\n");
      out.write("                answerNo: answerNo,\r\n");
      out.write("                ansImgId: ansImgId,\r\n");
      out.write("                pageSize: pageSize,\r\n");
      out.write("                originalAnsCardId: originalAnsCardId,\r\n");
      out.write("                errorId: errorId,\r\n");
      out.write("                test: test,\r\n");
      out.write("                updateTime: updateTime,\r\n");
      out.write("                path: path\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                if (data == 3) {\r\n");
      out.write("                    $('.ui.second.modal').modal('hide');\r\n");
      out.write("                    var pageNo = $('#currentPage').val();\r\n");
      out.write("                    queryData(pageNo);\r\n");
      out.write("                } else if (data == 4) {\r\n");
      out.write("                    showErrorOnPopup(\"无需重新选择答题卡信息，请重新选择异常解决方案\");\r\n");
      out.write("                } else {\r\n");
      out.write("                    $('.ui.second.modal').modal('hide');\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function updateException() {\r\n");
      out.write("            showErrorOnPopup(\"请选择异常解决方案\");\r\n");
      out.write("\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //撤销批阅异常\r\n");
      out.write("        function revokeMarkException() {\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var subjectId = $('#subject-popup').val();\r\n");
      out.write("            var originalAnsCardId = $('#originalAnsCard-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            var errorId = $('#error-type input[name=\"errorType\"]:checked').val();\r\n");
      out.write("            $.post('/console/markException/revokeMarkException', {\r\n");
      out.write("                id: id,\r\n");
      out.write("                errorId: errorId,\r\n");
      out.write("                paperId: paperId,\r\n");
      out.write("                number: number,\r\n");
      out.write("                testId: testId,\r\n");
      out.write("                subjectId: subjectId,\r\n");
      out.write("                originalAnsCardId: originalAnsCardId,\r\n");
      out.write("                updateTime: updateTime\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                $('.ui.second.modal').modal('hide');\r\n");
      out.write("                if (data == 3) {\r\n");
      out.write("                    //刷首页\r\n");
      out.write("                    var pageNo = $('#currentPage').val();\r\n");
      out.write("                    queryData(pageNo);\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //删除批阅异常\r\n");
      out.write("        function deleteDetailMarkException() {\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var paperId = $('#paperId-popup').val();\r\n");
      out.write("            var number = $('#number-popup').val();\r\n");
      out.write("            var testId = $('#testId-popup').val();\r\n");
      out.write("            var originalAnsCardId = $('#originalAnsCard-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            $.post('/console/markException/deleteDetailMarkException', {\r\n");
      out.write("                testId: testId,\r\n");
      out.write("                id: id,\r\n");
      out.write("                paperId: paperId,\r\n");
      out.write("                number: number,\r\n");
      out.write("                originalAnsCardId: originalAnsCardId,\r\n");
      out.write("                updateTime: updateTime\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                $('.ui.second.modal').modal('hide');\r\n");
      out.write("                if (data == 3) {\r\n");
      out.write("                    //刷新首页\r\n");
      out.write("                    var pageNo = $('#currentPage').val();\r\n");
      out.write("                    queryData(pageNo);\r\n");
      out.write("                }\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //无法看到学生答案时操作\r\n");
      out.write("        function updateImgEmptyFlag() {\r\n");
      out.write("            var id = $('#id-popup').val();\r\n");
      out.write("            var updateTime = $('#updateTime-popup').val();\r\n");
      out.write("            $.get('/console/markException/updateImgEmptyFlag', {\r\n");
      out.write("                id: id,\r\n");
      out.write("                updateTime: updateTime\r\n");
      out.write("            }, function (data, state) {\r\n");
      out.write("                $('.ui.second.modal').modal('hide');\r\n");
      out.write("            })\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        //以下皆为通用函数(转圈圈，错误信息提示等)\r\n");
      out.write("        function showLoading() {\r\n");
      out.write("            $('#dimmer').addClass('active');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function hideLoading() {\r\n");
      out.write("            $('#dimmer').removeClass('active');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showSecondPopupLoading() {\r\n");
      out.write("            $('.ui.second.modal').dimmer('show');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function hideSecondPopupLoading() {\r\n");
      out.write("            $('.ui.second.modal').dimmer('hide');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showFirstPopupLoading() {\r\n");
      out.write("            $('.ui.first.modal').dimmer('show');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function hideFirstPopupLoading() {\r\n");
      out.write("            $('.ui.first.modal').dimmer('hide');\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showErrorOnPopup(msg) {\r\n");
      out.write("            $('#sel-message-popup').html(msg);\r\n");
      out.write("            $('#sel-message-popup').show();\r\n");
      out.write("            $('#sel-message-popup').delay(5000).hide(0);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showErrorOnPopup2(msg) {\r\n");
      out.write("            $('#sel-message2-popup').html(msg);\r\n");
      out.write("            $('#sel-message2-popup').show();\r\n");
      out.write("            $('#sel-message2-popup').delay(500000).hide(0);\r\n");
      out.write("        }\r\n");
      out.write("\r\n");
      out.write("        function showError(msg) {\r\n");
      out.write("            $('#error-message').html(msg);\r\n");
      out.write("            $('#error-message').show();\r\n");
      out.write("            $('#error-message').delay(5000).hide(0);\r\n");
      out.write("        }\r\n");
      out.write("        //以上皆为通用函数(转圈圈，错误信息提示等)\r\n");
      out.write("\r\n");
      out.write("    </script>\r\n");
      out.write("    <title>DKP管理</title>\r\n");
      out.write("</head>\r\n");
      out.write("<body>\r\n");
      out.write("<a href=\"");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${ctxStatic}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("/const/task_progress.xls\" download=\"task_progress.xls\" hidden><span id=\"a-export\">运行导出</span></a>\r\n");
      out.write("<div style=\"padding:0px 80px 20px 80px\">\r\n");
      out.write("    ");
      out.write('\n');
      if (_jspx_meth_c_set_2(_jspx_page_context))
        return;
      out.write("\n");
      out.write("<div class=\"ui eleven item menu\">\n");
      out.write("    <a class=\"item\" id=\"menu-dkp-org\">DKP管理</a>\n");
      out.write("    <a class=\"item\" id=\"menu-set\">修改密码</a>\n");
      out.write("    <a class=\"item\" id=\"menu-logout\">安全退出</a>\n");
      out.write("</div>\n");
      out.write("<div></div>\n");
      out.write("<h2 class=\"ui header\" id=\"menu-header\"></h2>\n");
      out.write("<form id=\"naviForm\" action=\"\" method=\"get\"></form>\n");
      out.write("<script type=\"text/javascript\">\n");
      out.write("    $(\".ui.menu .dropdown.item\").dropdown({on: 'hover'});\n");
      out.write("\n");
      out.write("    $(\"a#menu-dkp-org\").click(function () {\n");
      out.write("        location.href = \"/console/dkp\";\n");
      out.write("    })\n");
      out.write("\n");
      out.write("    $(\"a#menu-set\").click(function () {\n");
      out.write("        location.href = \"/views/console/set.do\";\n");
      out.write("    });\n");
      out.write("\n");
      out.write("    $(\"a#menu-logout\").click(function () {\n");
      out.write("        var form = $('#naviForm')[0];\n");
      out.write("        form.action = \"/logout\";\n");
      out.write("        form.submit();\n");
      out.write("    });\n");
      out.write("\n");
      out.write("    var servletPath = '");
      out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${servletPath}", java.lang.String.class, (PageContext)_jspx_page_context, null));
      out.write("';\n");
      out.write("    var jspName = servletPath.substring(servletPath.lastIndexOf(\"/\") + 1);\n");
      out.write("    jspName = jspName.substring(0, jspName.indexOf(\".\"));\n");
      out.write("    $('#menu-' + jspName).addClass('active');\n");
      out.write("\n");
      out.write("    if (jspName != 'integrate') {\n");
      out.write("        $(document).ready(function () {\n");
      out.write("            $('#menu-header').text($('title').text());\n");
      out.write("        });\n");
      out.write("    }\n");
      out.write("</script>\n");
      out.write("\r\n");
      out.write("    <div class=\"ui negative message\" style=\"display:none\" id=\"error-message\">\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <div class=\"ui form\">\r\n");
      out.write("        <div class=\"ui error message hide\"></div>\r\n");
      out.write("        <div class=\"fields\">\r\n");
      out.write("            <div class=\"field\">\r\n");
      out.write("                <div class=\"ui search selection dropdown\" id=\"sel-game\">\r\n");
      out.write("                    <input id=\"game\" name=\"game\" type=\"hidden\"/>\r\n");
      out.write("                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                    <div class=\"default text\">选择游戏</div>\r\n");
      out.write("                    <div class=\"menu\">\r\n");
      out.write("                        ");
      if (_jspx_meth_c_forEach_0(_jspx_page_context))
        return;
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"field\">\r\n");
      out.write("                <div class=\"ui selection dropdown\" id=\"sel-union\">\r\n");
      out.write("                    <input id=\"union\" name=\"union\" type=\"hidden\"/>\r\n");
      out.write("                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                    <div class=\"default text\">选择工会</div>\r\n");
      out.write("                    <div class=\"menu\">\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"field\">\r\n");
      out.write("                <div class=\"ui selection dropdown\" id=\"sel-team\">\r\n");
      out.write("                    <input id=\"team\" name=\"team\" type=\"hidden\"/>\r\n");
      out.write("                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                    <div class=\"default text\">选择团队</div>\r\n");
      out.write("                    <div class=\"menu\">\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"field\">\r\n");
      out.write("                <div class=\"ui selection dropdown\" id=\"sel-activity\">\r\n");
      out.write("                    <input id=\"activity\" name=\"activity\" type=\"hidden\"/>\r\n");
      out.write("                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                    <div class=\"default text\">选择活动</div>\r\n");
      out.write("                    <div class=\"menu\">\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("            <div class=\"ui submit button\" id=\"btn-query\">\r\n");
      out.write("                查询\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("\r\n");
      out.write("    <div class=\"ui divider\"></div>\r\n");
      out.write("\r\n");
      out.write("    <input type=\"hidden\" value=\"1\" id=\"currentPage\"/>\r\n");
      out.write("\r\n");
      out.write("    <div id=\"no-data\" style=\"display:none\">NO DATA</div>\r\n");
      out.write("\r\n");
      out.write("    <table class=\"ui celled compact table\" style=\"display:none\" id=\"tbl-data\">\r\n");
      out.write("        <thead>\r\n");
      out.write("        <tr>\r\n");
      out.write("            <th>游戏名称</th>\r\n");
      out.write("            <th>工会名称</th>\r\n");
      out.write("            <th>团队名称</th>\r\n");
      out.write("            <th>工会活动</th>\r\n");
      out.write("            <th>团队成员</th>\r\n");
      out.write("        </tr>\r\n");
      out.write("        </thead>\r\n");
      out.write("        <tbody>\r\n");
      out.write("        </tbody>\r\n");
      out.write("        <tfoot>\r\n");
      out.write("        <tr>\r\n");
      out.write("            <th colspan=\"10\">\r\n");
      out.write("                <div class=\"ui right floated pagination menu\" id=\"paging\">\r\n");
      out.write("                    <a class=\"icon item disabled\">\r\n");
      out.write("                        <i class=\"angle left icon\"></i>\r\n");
      out.write("                    </a>\r\n");
      out.write("                    <a class=\"item\">1</a>\r\n");
      out.write("                    <a class=\"icon item\">\r\n");
      out.write("                        <i class=\"angle right icon\"></i>\r\n");
      out.write("                    </a>\r\n");
      out.write("                </div>\r\n");
      out.write("            </th>\r\n");
      out.write("        </tr>\r\n");
      out.write("        </tfoot>\r\n");
      out.write("    </table>\r\n");
      out.write("</div>\r\n");
      out.write("<div class=\"ui first coupled modal\" style=\"z-index: -1;width: 1000px;\">\r\n");
      out.write("    <i class=\"close icon\"></i>\r\n");
      out.write("    <div class=\"header\">\r\n");
      out.write("        批阅异常详细列表\r\n");
      out.write("    </div>\r\n");
      out.write("    <input type=\"hidden\" value=\"1\" id=\"currentPage-popup\"/>\r\n");
      out.write("    <div id=\"no-data-detail\" style=\"display:none\">NO DATA</div>\r\n");
      out.write("    <div class=\"content\">\r\n");
      out.write("        <table class=\"ui celled compact table\" style=\"display:none\" id=\"tbl-data-detail\">\r\n");
      out.write("            <thead>\r\n");
      out.write("            <tr>\r\n");
      out.write("                <th>考试号</th>\r\n");
      out.write("                <th>图片名称</th>\r\n");
      out.write("                <th>操作</th>\r\n");
      out.write("            </tr>\r\n");
      out.write("            </thead>\r\n");
      out.write("            <tbody>\r\n");
      out.write("\r\n");
      out.write("            </tbody>\r\n");
      out.write("            <tfoot>\r\n");
      out.write("            <tr>\r\n");
      out.write("                <th colspan=\"10\">\r\n");
      out.write("                    <div class=\"ui right floated pagination menu\" id=\"detailPaging\">\r\n");
      out.write("                        <a class=\"icon item disabled\">\r\n");
      out.write("                            <i class=\"angle left icon\"></i>\r\n");
      out.write("                        </a>\r\n");
      out.write("                        <a class=\"item\">1</a>\r\n");
      out.write("                        <a class=\"icon item\">\r\n");
      out.write("                            <i class=\"angle right icon\"></i>\r\n");
      out.write("                        </a>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </th>\r\n");
      out.write("            </tr>\r\n");
      out.write("            </tfoot>\r\n");
      out.write("        </table>\r\n");
      out.write("        <div class=\"ui page inverted dimmer\">\r\n");
      out.write("            <div class=\"ui loader\"></div>\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"ui second coupled modal\" style=\"width:1250px;  height:1000px;\">\r\n");
      out.write("    <i class=\"close icon\"></i>\r\n");
      out.write("    <div class=\"header\" style=\"margin-top: 20px;margin-bottom: 30px\">\r\n");
      out.write("        <h2>批阅异常处理</h2>\r\n");
      out.write("    </div>\r\n");
      out.write("    <div class=\"content\">\r\n");
      out.write("        <div id=\"left\" style=\"float:left ; width:65% ; height:100% ;\">\r\n");
      out.write("            <div id=\"sel-picture-popup\" name=\"sel-picture-popup\" class=\"zoom\">\r\n");
      out.write("\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div id=\"sel-exception-popup\" name=\"sel-exception-popup\">\r\n");
      out.write("\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("\r\n");
      out.write("\r\n");
      out.write("        <div id=\"right\" style=\"float:right ; width:35% ; height:100%;border-left: 2px;\">\r\n");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-bottom: 20px;\" id=\"error-type\">\r\n");
      out.write("                <div class=\"grouped fields\">\r\n");
      out.write("                    <label><h3>异常信息</h3></label>\r\n");
      out.write("                    <div class=\"field\" style=\"margin-bottom: 20px;\">\r\n");
      out.write("                        <div class=\"fields\">\r\n");
      out.write("                            <div class=\"five wide field\" id=\"sel-subject-popup\">\r\n");
      out.write("\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("\r\n");
      out.write("                    <div class=\"field\" style=\"margin-bottom: 20px;\">\r\n");
      out.write("                        <div class=\"fields\">\r\n");
      out.write("                            <div class=\"nine wide field\" id=\"sel-question-popup\">\r\n");
      out.write("\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <label><h3>异常解决方案</h3></label>\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <div class=\"ui radio checkbox\" style=\"margin-bottom: 30px;margin-top: 10px\">\r\n");
      out.write("                            <input type=\"radio\" name=\"errorType\" onclick=\"showChooseDo()\" value=\"1\">\r\n");
      out.write("                            <label>选做题重新选择</label>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <div class=\"ui radio checkbox\" style=\"margin-bottom: 30px;\">\r\n");
      out.write("                            <input type=\"radio\" name=\"errorType\" onclick=\"showMarkException()\" value=\"2\">\r\n");
      out.write("                            <label>答题卡信息重新选择</label>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <div class=\"ui radio checkbox\" style=\"margin-bottom: 30px;\">\r\n");
      out.write("                            <input type=\"radio\" name=\"errorType\" id=\"errorType\" onclick=\"seeDetailMarkException()\"\r\n");
      out.write("                                   value=\"3\">\r\n");
      out.write("                            <label>其他异常错误！请上报管理员</label>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-bottom: 20px\">\r\n");
      out.write("                <div class=\"fields\">\r\n");
      out.write("\r\n");
      out.write("                    <div class=\"ui negative message\" style=\"display:none\" id=\"sel-message2-popup\">\r\n");
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            ");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-bottom: 80px\" id=\"sel-chooseDo-popup\">\r\n");
      out.write("                <div class=\"inline fields\" style=\"margin-top: 10px;margin-bottom: 60px;\">\r\n");
      out.write("                    <label><h3 id=\"chooseDo-label\">选做题试题重新选择</h3></label>\r\n");
      out.write("                </div>\r\n");
      out.write("                <div class=\"grouped  fields\" id=\"choose-do\">\r\n");
      out.write("\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            ");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-bottom: 100px\" id=\"sel-prompt-popup\">\r\n");
      out.write("                <div class=\"content\">\r\n");
      out.write("                    <div id=\"prompt-message\">\r\n");
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"ui form\">\r\n");
      out.write("                        <div class=\"fields\">\r\n");
      out.write("                            <div class=\"six wide field\" id=\"revoke-button2\">\r\n");
      out.write("                                <button class=\"fluid ui button\" onclick=\"revokeMarkException()\">非批阅异常</button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"five wide field\" id=\"delete-button2\">\r\n");
      out.write("                                <button class=\"fluid ui button\" onclick=\"deleteDetailMarkException()\">确认放弃</button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"four wide field\" id=\"submit-button\">\r\n");
      out.write("                                <button class=\"fluid ui button\" onclick=\"updateImgEmptyFlag()\">提交</button>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            ");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" id=\"sel-fireWork-popup\">\r\n");
      out.write("                <div class=\"ui form\" style=\"margin-bottom: 60px\">\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <label><h3>试卷组选择</h3></label>\r\n");
      out.write("                        <div class=\"field\" style=\"margin-top: 10px\">\r\n");
      out.write("                            <div class=\"ui disabled selection dropdown\" id=\"sel-group-popup\">\r\n");
      out.write("                                <input id=\"group-popup\" name=\"group-popup\" type=\"hidden\"/>\r\n");
      out.write("                                <i class=\"dropdown icon\"></i>\r\n");
      out.write("                                <div class=\"default text\">选择试卷组</div>\r\n");
      out.write("                                <div class=\"menu\">\r\n");
      out.write("\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <div class=\"ui form\" style=\"margin-bottom: 60px\">\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <label><h3>试卷选择</h3></label>\r\n");
      out.write("                        <div class=\"field\" style=\"margin-top: 10px\">\r\n");
      out.write("                            <div class=\"ui selection dropdown\" id=\"sel-paper-popup\">\r\n");
      out.write("                                <input id=\"paper-popup\" name=\"paper-popup\" type=\"hidden\"/>\r\n");
      out.write("                                <i class=\"dropdown icon\"></i>\r\n");
      out.write("                                <div class=\"default text\">选择试卷</div>\r\n");
      out.write("                                <div class=\"menu\">\r\n");
      out.write("\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("\r\n");
      out.write("                <div class=\"ui form\">\r\n");
      out.write("                    <div class=\"field\">\r\n");
      out.write("                        <label><h3>答题卡选择</h3></label>\r\n");
      out.write("                        <div class=\"two fields\" style=\"margin-top: 10px\">\r\n");
      out.write("                            <div class=\"field\">\r\n");
      out.write("                                <div class=\"ui selection dropdown\" id=\"sel-answerNoLeft-popup\">\r\n");
      out.write("                                    <input id=\"answerNoLeft-popup\" name=\"answerNoLeft-popup\" type=\"hidden\"/>\r\n");
      out.write("                                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                                    <div class=\"default text\">选择左答题卡</div>\r\n");
      out.write("                                    <div class=\"menu\">\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                            <div class=\"field\" id=\"sel-right\">\r\n");
      out.write("                                <div class=\"ui selection dropdown\" id=\"sel-answerNoRight-popup\">\r\n");
      out.write("                                    <input id=\"answerNoRight-popup\" name=\"answerNoRight-popup\" type=\"hidden\"/>\r\n");
      out.write("                                    <i class=\"dropdown icon\"></i>\r\n");
      out.write("                                    <div class=\"default text\">选择右答题卡</div>\r\n");
      out.write("                                    <div class=\"menu\">\r\n");
      out.write("                                    </div>\r\n");
      out.write("                                </div>\r\n");
      out.write("                            </div>\r\n");
      out.write("                        </div>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            ");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-top: 80px;\" id=\"sel-button-popup\">\r\n");
      out.write("                <div class=\"fields\">\r\n");
      out.write("                    <div class=\"five wide field\" id=\"update-button\">\r\n");
      out.write("                        <button class=\"fluid ui button\" onclick=\"updateException()\">确认修改</button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"six wide field\" id=\"revoke-button\">\r\n");
      out.write("                        <button class=\"fluid ui button\" onclick=\"revokeMarkException()\">非批阅异常</button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                    <div class=\"five wide field\" id=\"delete-button\">\r\n");
      out.write("                        <button class=\"fluid ui button\" onclick=\"deleteDetailMarkException()\">确认放弃</button>\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("\r\n");
      out.write("            ");
      out.write("\r\n");
      out.write("            <div class=\"ui form\" style=\"margin-top: 10px;\">\r\n");
      out.write("                <div class=\"fields\">\r\n");
      out.write("\r\n");
      out.write("                    <div class=\"ui negative message\" style=\"display:none\" id=\"sel-message-popup\">\r\n");
      out.write("\r\n");
      out.write("                    </div>\r\n");
      out.write("                </div>\r\n");
      out.write("            </div>\r\n");
      out.write("        </div>\r\n");
      out.write("        <div class=\"ui page inverted dimmer\">\r\n");
      out.write("\r\n");
      out.write("        </div>\r\n");
      out.write("    </div>\r\n");
      out.write("</div>\r\n");
      out.write("\r\n");
      out.write("<div class=\"ui page inverted dimmer\" id=\"dimmer\">\r\n");
      out.write("    <div class=\"ui loader\"></div>\r\n");
      out.write("</div>\r\n");
      out.write("</body>\r\n");
      out.write("</html>\r\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }

  private boolean _jspx_meth_c_set_0(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_set_0 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _jspx_tagPool_c_set_var_value_nobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    _jspx_th_c_set_0.setPageContext(_jspx_page_context);
    _jspx_th_c_set_0.setParent(null);
    _jspx_th_c_set_0.setVar("ctxStatic");
    _jspx_th_c_set_0.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${pageContext.request.contextPath}/static", java.lang.Object.class, (PageContext)_jspx_page_context, null));
    int _jspx_eval_c_set_0 = _jspx_th_c_set_0.doStartTag();
    if (_jspx_th_c_set_0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_0);
      return true;
    }
    _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_0);
    return false;
  }

  private boolean _jspx_meth_c_set_1(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_set_1 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _jspx_tagPool_c_set_var_value_nobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    _jspx_th_c_set_1.setPageContext(_jspx_page_context);
    _jspx_th_c_set_1.setParent(null);
    _jspx_th_c_set_1.setVar("ctxCKEdit");
    _jspx_th_c_set_1.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${pageContext.request.contextPath}", java.lang.Object.class, (PageContext)_jspx_page_context, null));
    int _jspx_eval_c_set_1 = _jspx_th_c_set_1.doStartTag();
    if (_jspx_th_c_set_1.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_1);
      return true;
    }
    _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_1);
    return false;
  }

  private boolean _jspx_meth_c_set_2(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:set
    org.apache.taglibs.standard.tag.rt.core.SetTag _jspx_th_c_set_2 = (org.apache.taglibs.standard.tag.rt.core.SetTag) _jspx_tagPool_c_set_var_value_nobody.get(org.apache.taglibs.standard.tag.rt.core.SetTag.class);
    _jspx_th_c_set_2.setPageContext(_jspx_page_context);
    _jspx_th_c_set_2.setParent(null);
    _jspx_th_c_set_2.setVar("servletPath");
    _jspx_th_c_set_2.setValue((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${pageContext.request.servletPath}", java.lang.Object.class, (PageContext)_jspx_page_context, null));
    int _jspx_eval_c_set_2 = _jspx_th_c_set_2.doStartTag();
    if (_jspx_th_c_set_2.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
      _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_2);
      return true;
    }
    _jspx_tagPool_c_set_var_value_nobody.reuse(_jspx_th_c_set_2);
    return false;
  }

  private boolean _jspx_meth_c_forEach_0(PageContext _jspx_page_context)
          throws Throwable {
    PageContext pageContext = _jspx_page_context;
    JspWriter out = _jspx_page_context.getOut();
    //  c:forEach
    org.apache.taglibs.standard.tag.rt.core.ForEachTag _jspx_th_c_forEach_0 = (org.apache.taglibs.standard.tag.rt.core.ForEachTag) _jspx_tagPool_c_forEach_var_items.get(org.apache.taglibs.standard.tag.rt.core.ForEachTag.class);
    _jspx_th_c_forEach_0.setPageContext(_jspx_page_context);
    _jspx_th_c_forEach_0.setParent(null);
    _jspx_th_c_forEach_0.setItems((java.lang.Object) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${gameInfoList}", java.lang.Object.class, (PageContext)_jspx_page_context, null));
    _jspx_th_c_forEach_0.setVar("game");
    int[] _jspx_push_body_count_c_forEach_0 = new int[] { 0 };
    try {
      int _jspx_eval_c_forEach_0 = _jspx_th_c_forEach_0.doStartTag();
      if (_jspx_eval_c_forEach_0 != javax.servlet.jsp.tagext.Tag.SKIP_BODY) {
        do {
          out.write("\r\n");
          out.write("                            <div class=\"item\" data-value=\"");
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${game.id}", java.lang.String.class, (PageContext)_jspx_page_context, null));
          out.write('"');
          out.write('>');
          out.write((java.lang.String) org.apache.jasper.runtime.PageContextImpl.evaluateExpression("${game.gameName}", java.lang.String.class, (PageContext)_jspx_page_context, null));
          out.write("</div>\r\n");
          out.write("                        ");
          int evalDoAfterBody = _jspx_th_c_forEach_0.doAfterBody();
          if (evalDoAfterBody != javax.servlet.jsp.tagext.BodyTag.EVAL_BODY_AGAIN)
            break;
        } while (true);
      }
      if (_jspx_th_c_forEach_0.doEndTag() == javax.servlet.jsp.tagext.Tag.SKIP_PAGE) {
        return true;
      }
    } catch (Throwable _jspx_exception) {
      while (_jspx_push_body_count_c_forEach_0[0]-- > 0)
        out = _jspx_page_context.popBody();
      _jspx_th_c_forEach_0.doCatch(_jspx_exception);
    } finally {
      _jspx_th_c_forEach_0.doFinally();
      _jspx_tagPool_c_forEach_var_items.reuse(_jspx_th_c_forEach_0);
    }
    return false;
  }
}
